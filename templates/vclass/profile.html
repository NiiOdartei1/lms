{% extends 'student/base_student.html' %}
{% block title %}My Profile{% endblock %}

{% block content %}
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" />
<style>
  body {
    background-color: #f8f9fa;
  }

  .profile-container {
    background: #fff;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
  }

  .profile-left {
    border-right: 1px solid #dee2e6;
    background-color: #fdfdfd;
  }

  .profile-left .profile-pic {
    width: 130px;
    height: 130px;
    object-fit: cover;
    border-radius: 50%;
    border: 3px solid #007bff;
  }

  .profile-left h5 {
    color: #007bff;
    font-weight: 600;
  }

  .info-section {
    margin-top: 1rem;
  }

  .info-card {
    border: 1px solid #dee2e6;
    border-radius: 6px;
    margin-bottom: 1rem;
    background: #fff;
  }

  .info-card .card-header {
    background-color: #f0f4f8;
    font-weight: 600;
    color: #004085;
  }

  .info-card .card-body p {
    margin-bottom: 0.4rem;
    font-size: 0.95rem;
  }

  .info-label {
    font-weight: 600;
    color: #555;
  }

  .info-value {
    color: #333;
  }

  @media (max-width: 768px) {
    .profile-left {
      border-right: none;
      border-bottom: 1px solid #dee2e6;
      text-align: center;
    }
  }
</style>

<div class="container my-4">
  <div class="row profile-container">
    <!-- LEFT PANEL -->
    <div class="col-md-4 profile-left text-center p-4">
      <img src="{{ user.profile_picture_url or url_for('static', filename='img/default_profile.png') }}"
           alt="Profile Picture" class="profile-pic shadow-sm mb-3">

      <h5>{{ user.full_name }}</h5>
      <p class="text-muted mb-1">{{ profile.current_class or 'Student' }}</p>
      <p><i class="bi bi-envelope me-1"></i>{{ profile.email or user.email }}</p>
      <hr>
      <div class="text-start ps-md-3">
        <p><span class="info-label">Phone:</span> {{ profile.phone or 'N/A' }}</p>
        <p><span class="info-label">Address:</span> {{ profile.address or 'N/A' }}</p>
        <p><span class="info-label">City:</span> {{ profile.city or 'N/A' }}</p>
        <p><span class="info-label">Postal Code:</span> {{ profile.postal_code or 'N/A' }}</p>
      </div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="col-md-8 p-4">
      <div class="info-section">
        <!-- Personal Info -->
        <div class="info-card">
          <div class="card-header">
            <i class="bi bi-person-lines-fill me-2"></i>Personal Information
          </div>
          <div class="card-body">
            <p><span class="info-label">Date of Birth:</span> {{ profile.dob.strftime('%B %d, %Y') if profile.dob else 'N/A' }}</p>
            <p><span class="info-label">Gender:</span> {{ profile.gender or 'N/A' }}</p>
            <p><span class="info-label">Blood Group:</span> {{ profile.blood_group or 'N/A' }}</p>
            <p><span class="info-label">Medical Conditions:</span> {{ profile.medical_conditions or 'None' }}</p>
          </div>
        </div>

        <!-- Academic Info -->
        <div class="info-card">
          <div class="card-header">
            <i class="bi bi-mortarboard-fill me-2"></i>Academic Information
          </div>
          <div class="card-body">
            <p><span class="info-label">Current Class:</span> {{ profile.current_class or 'N/A' }}</p>
            <p><span class="info-label">Academic Year:</span> {{ profile.academic_year or 'N/A' }}</p>
            <p><span class="info-label">Preferred 2nd Language:</span> {{ profile.preferred_second_language or 'N/A' }}</p>
            <p><span class="info-label">Previous School:</span> {{ profile.previous_school or 'N/A' }}</p>
            <p><span class="info-label">Last Class Completed:</span> {{ profile.last_class_completed or 'N/A' }}</p>
            <p><span class="info-label">Academic Performance:</span> {{ profile.academic_performance or 'N/A' }}</p>
          </div>
        </div>

        <!-- Guardian Info -->
        <div class="info-card">
          <div class="card-header">
            <i class="bi bi-people-fill me-2"></i>Guardian Information
          </div>
          <div class="card-body">
            <p><span class="info-label">Name:</span> {{ profile.guardian_name or 'N/A' }}</p>
            <p><span class="info-label">Relation:</span> {{ profile.guardian_relation or 'N/A' }}</p>
            <p><span class="info-label">Contact:</span> {{ profile.guardian_contact or 'N/A' }}</p>
          </div>
        </div>

        <!-- Emergency & Sibling Info -->
        <div class="info-card mb-0">
          <div class="card-header text-danger">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>Emergency & Sibling Information
          </div>
          <div class="card-body row">
            <div class="col-md-6">
              <p><span class="info-label">Emergency Contact Name:</span> {{ profile.emergency_contact_name or 'N/A' }}</p>
              <p><span class="info-label">Emergency Contact Number:</span> {{ profile.emergency_contact_number or 'N/A' }}</p>
            </div>
            <div class="col-md-6">
              <p><span class="info-label">Sibling Name:</span> {{ profile.sibling_name or 'N/A' }}</p>
              <p><span class="info-label">Sibling Class:</span> {{ profile.sibling_class or 'N/A' }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
